"use strict";angular.module("frontendApp",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/div.html",controller:"DivCtrl"}).when("/play",{templateUrl:"views/play.html",controller:"PlayCtrl"}).when("/div",{templateUrl:"views/div.html",controller:"DivCtrl"}).when("/main",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("frontendApp").controller("MainCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("frontendApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("frontendApp").controller("DivCtrl",["$scope","$http",function(a,b){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"];var c=function(a){var b=function(a,b,c){a=parseInt(a,16),b=parseInt(b,16);var d=Math.floor(c*b+(1-c)*a);return(d+256).toString(16).substr(-2).toUpperCase()};return"#"+b("ee","1C",a)+b("ee","64",a)+b("ee","6D",a)};a.legends=_.map([0,.2,.4,.5,.6,.8,1].reverse(),function(a){return{value:a,valuePercentage:(100*a).toString(10)+"%",color:c(a)}}),a.isLoadingTransDictMover=!0,a.isLoadingTransDictVoter=!0,a.isLoadingMVRelation=!0,b.get("/api/transdict-mover.json").success(function(b){a.isLoadingTransDictMover=!1,a.transDictMover=b,a.rangeMovers=_.range(1,Object.keys(a.transDictMover).length+1)}).error(function(a){console.log("loading failure")}),b.get("/api/transdict-voter.json").success(function(b){a.isLoadingTransDictVoter=!1,a.transDictVoter=b,a.rangeVoters=_.range(1,Object.keys(a.transDictVoter).length+1)}).error(function(a){console.log("loading failure")}),b.get("/api/mv-relation.json").success(function(b){a.isLoadingMVRelation=!1,a.mvRelation=b;for(var d=0;d<a.mvRelation.length;d++)for(var e=0;e<a.mvRelation[d].length;e++){var f=a.mvRelation[d][e],g=Math.round(100*f),h="black";.5>f&&(h="white"),a.mvRelation[d][e]={value:f,valuePercentage:g,color:c(f)}}}).error(function(a){console.log("loading failure")}),a.currentStep=0;var d="https://spreadsheets.google.com/feeds/list/1s2CkDX0sMaZHzHjl_hbJs8DkyUAca08enU1te3aEPUU/od6/public/values?alt=json";b.get(d).success(function(b){console.log(b),a.stories=_.map(b.feed.entry,function(a){return a});var c=new Shepherd.Tour({defaults:{classes:"shepherd-theme-arrows",scrollTo:!0}}),d=8,e=1,f=d+e,g=15*f,h=8*f;for(var i in a.stories){var j=a.stories[i],k="frame"+i,l="frame"+i,m=$("<div></div>").attr("id",k).addClass("guide-frame");m.appendTo("#legco");for(var n=JSON.parse(j.gsx$rectangles.$t),o=0;o<n.length;o++){var p=n[o],q=$("<div></div>").addClass("rectangle").addClass(l);q.css("top",h+f*(p[0]-1)-1+"px"),q.css("left",g+f*(p[1]-1)-1+"px"),q.css("width",(p[3]-p[1]+1)*f),q.css("height",(p[2]-p[0]+1)*f),q.appendTo(m)}var r=function(){var b=".frame"+a.currentStep;$(".rectangle").hide(),$(b).show()};a.nextFunc=function(){a.currentStep+=1;r(),c.next(),a.$apply()},a.backFunc=function(){a.currentStep-=1;r(),c.back(),a.$apply()};var s=[];i>0&&s.push({text:"上條",action:a.backFunc}),i<a.stories.length-1&&s.push({text:"下條",action:a.nextFunc}),c.addStep("Step"+i,{title:j.gsx$title.$t,text:j.gsx$text.$t,attachTo:"."+l,buttons:s})}$(".rectangle").hide(),$(".frame0").show(),c.start()}).error(function(a){console.log("loading failure")})}]),angular.module("frontendApp").controller("PlayCtrl",["$scope","$http",function(a,b){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],a.myPromise1=b.get("https://spreadsheets.google.com/feeds/list/1s2CkDX0sMaZHzHjl_hbJs8DkyUAca08enU1te3aEPUU/od6/public/values?alt=json"),a.myPromise2=b.get("/api/mv-relation.json"),a.myPromise3=b.get("/api/transdict-mover.json"),a.myPromise4=b.get("/api/transdict-voter.json")}]);